!function(window,jQuery){window.ParamDynamicForm=function(a,e){this.$wrapper=a,this.options=$.extend({new_param_form_url:null},e),this.$wrapper.on("click",".js-collapse-params",this.handleCollapsibleArea.bind(this)),this.$wrapper.on("show.bs.collapse",".accordion",this.handleRetouchCollapse.bind(this)),this.$wrapper.on("show.bs.collapse",".js-param-toggle",this.paramShowCollapse.bind(this)),this.$wrapper.on("hide.bs.collapse",".js-param-toggle",this.paramHideCollapse.bind(this)),this.$wrapper.find(".js-picture-settings input").prop("disabled",!0).addClass("disabled"),this.$wrapper.find('[data-toggle="popover"]').popover()},$.extend(window.ParamDynamicForm.prototype,{onChangeParamFields:function(a){var e=$(a.currentTarget).closest(".accordion-content");$(a.currentTarget).val()!=$(a.currentTarget).closest("[data-onchange]").data("value")?(console.log("disabled false"),e.find('[data-dependon="'+$(a.currentTarget).closest("[data-onchange]").data("onchange")+'"]').prop("disabled",!1),e.find('[data-dependon="'+$(a.currentTarget).closest("[data-onchange]").data("onchange")+'"] input').prop("disabled",!1)):(console.log("disabled true"),e.find('[data-dependon="'+$(a.currentTarget).closest("[data-onchange]").data("onchange")+'"]').prop("disabled",!0),e.find('[data-dependon="'+$(a.currentTarget).closest("[data-onchange]").data("onchange")+'"] input').prop("disabled",!0))},handleRetouchCollapse:function(a){this.updateParamsForm($(a.currentTarget).data("uuid"),$(a.currentTarget).data("id"),$(a.currentTarget).find(".accordion-content"))},paramShowCollapse:function(a){var e=$(a.currentTarget).find("i.fas");e.removeClass("fa-angle-right"),e.addClass("fa-angle-down"),console.log("show")},paramHideCollapse:function(a){var e=$(a.currentTarget).find("i.fas");e.removeClass("fa-angle-down"),e.addClass("fa-angle-right"),console.log("hide")},handleCollapsibleArea:function(a){"true"==$(a.currentTarget).attr("aria-expanded")?$(a.currentTarget).find("i.fas").removeClass("fa-angle-down").addClass("fa-angle-right"):$(a.currentTarget).find("i.fas").removeClass("fa-angle-right").addClass("fa-angle-down")},initHtml:function(){this.$wrapper.find(".js-disabled-block").each(function(){$(this).parents(".js-param-col").next().find(".js-img-preview").attr("src",$(this).data("src"))}),this.$wrapper.find('input[type="file"]').each(function(){$(this).parents(".js-param-col").next().find(".js-img-preview").attr("src",$(this).data("src"))}),this.$wrapper.find(".js-renovation-choices").each(function(){var a=$(this).closest(".js-renovation-section").find(".js-renovation-img-thumb");""!==$(this).find(":selected").data("img-src")&&a.attr("src",$(this).find(":selected").data("img-src"))}),this.$wrapper.find(".js-renovation-choices").imagepicker({hide_select:!0,show_label:!1}),this.$wrapper.find("input").attr("disabled",!0).addClass("disabled"),this.$wrapper.find('[data-toggle="popover"]').popover()},updateParamsForm:function($uuid,$id,$elem){var self=this;0===$elem.children().length&&$.ajax({url:Routing.generate(this.options.new_param_form_url,{uuid:$uuid,id:$id}),method:"GET",cache:!0,beforeSend:function(){$elem.html('<div class="lt-px-auto-small animated fadeIn"><div class="partial-loader"></div></div>')},success:function(a){$elem.html(a),self.initHtml()},error:function(xhr,status,error){var json=eval("("+XMLHttpRequest.responseText+")");alertify.error(json.error,5)}})}})}(window,jQuery);
