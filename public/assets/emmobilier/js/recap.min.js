!function(window,$){function validatePromoCode($form){$.ajax({url:$form.attr("action"),type:$form.attr("method"),data:$form.serializeArray(),success:function(e){var t=$.isArray(e.msg)?e.msg.join("</br>"):e.msg;e.success?($form.find(".js-code-promo-input").removeClass("is-invalid state-invalid").addClass("is-valid state-valid"),$form.find(".js-code-promo-txt").empty().append('<div class="valid-feedback d-block"><span>'+t+"</span></div>")):($form.find(".js-code-promo-input").removeClass("is-valid state-valid").addClass("is-invalid state-invalid"),$form.find(".js-code-promo-txt").empty().append('<div class="invalid-feedback d-block"><span>'+t+"</span></div>")),updateOrderPrice($(document).find("#js-recap-form"))},error:function(XMLHttpRequest,textStatus,errorThrown){var json=eval("("+XMLHttpRequest.responseText+")");alertify.error(json.error)}})}function updateOrderPrice(e){$(document).find("#js-recap-order-table").height();$.ajax({url:e.attr("action"),type:e.attr("method"),data:e.serializeArray(),beforeSend:function(){$(document).find("#js-recap-order-table tr").css("opacity","0.1"),$(document).find("#js-recap-order-actions").addClass("disabled").css("opacity","0.1"),$(document).find("#js-recap-order-table").find(".table-loader").remove(),$(document).find("#js-recap-order-table").append('<div class="table-loader" style="opacity: 1;"></div>')},success:function(e){$(document).find("#js-recap-order-table").html(e.response),$(document).find("#js-recap-order-actions").html(e.actions),$(document).find("#js-recap-order-table").css("opacity","1"),$(document).find("#js-recap-order-actions").css("opacity","1")},error:function(e,t,o){alertify.error("Quelque chose d'inattendu s'est produit")}})}$.fn.extend({animateCss:function(e,t){var o=function(e){var t={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(var o in t)if(void 0!==e.style[o])return t[o]}(document.createElement("div"));return this.addClass("animated "+e).one(o,function(){$(this).removeClass("animated "+e),"function"==typeof t&&t()}),this}}),$(document).on("change",".js-order-delivery-time",function(e){e.preventDefault(),updateOrderPrice($(this).closest("form"))}),$(document).on("submit","#js-recap-form",function(e){e.preventDefault(),updateOrderPrice($(this).closest("form"))}),$(document).on("submit","#js-promo-code-form",function(e){e.preventDefault(),validatePromoCode($(this).closest("form"))})}(window,jQuery);
