!function(e,t){e.Order=function(e){this.$wrapper=e,this.$wrapper.on("click",".js-picture-detail-param",this.showParams.bind(this)),alertify.genericDialog||alertify.dialog("genericDialog",this.genericDialog.bind(this))},$.extend(e.Order.prototype,{genericDialog:function(){var e=this;return{main:function(e){return this.setContent(e),this},hooks:{onshow:function(){$(this.elements.body.querySelector("form"));$(this.elements.body).find(".js-disabled-block").each(function(){$(this).parents(".js-param-col").next().find(".js-img-preview").attr("src",$(this).data("src"))}),$(this.elements.body).find('input[type="file"]').each(function(){$(this).parents(".js-param-col").next().find(".js-img-preview").attr("src",$(this).data("src"))}),$(this.elements.body).find(".js-renovation-choices").each(function(){var e=$(this).closest(".js-renovation-section").find(".js-renovation-img-thumb");""!==$(this).find(":selected").data("img-src")&&e.attr("src",$(this).find(":selected").data("img-src"))}),$(this.elements.body).find(".js-renovation-choices").imagepicker({hide_select:!0,show_label:!1}),$(this.elements.body).find(".js-picture-settings input").prop("disabled",!0).addClass("disabled"),$(this.elements.body).find('[data-toggle="popover"]').popover()},onclose:function(){console.log("onclose")},onupdate:function(){console.log("onupdate")}},setup:function(){return{focus:{element:function(){return this.elements.body.querySelector(this.get("selector"))},select:!0},prepare:function(){e.initHtml(this.elements.body)},options:{basic:!0,resizable:!1,startMaximized:!0,transition:"zoom"}}},settings:{selector:void 0}}},showParams:function(e){e.preventDefault();var t={};$(e.currentTarget).closest(".js-picture-detail-section").find("select option:selected");$.ajax({url:Routing.generate("admin_view_param_form",{id_picture_detail:$(e.currentTarget).data("picture-detail-id")}),method:"GET",async:!1,cache:!0,beforeSend:function(e,i){t=alertify.message('<div class="partial-loader"></div>',0)},success:function(e){t.dismiss(),alertify.genericDialog(e).set("selector","form")},error:function(e,i,n){t.dismiss(),alertify.error("something went wrong sorry about that. please try again later.",5)}})}}),$("div#js-picture-content").find("div.card-options > a").click(function(t){t.preventDefault();var i=$(this).prop("href"),n=$(this).attr("download"),s=document.createElement("img");return s.addEventListener("load",()=>{const e=document.createElement("a");e.href=s.src,e.download=n,e.click()}),s.src=e.location.origin+"/admin/order/load-external-image?url="+i,!1})}(window,jQuery);