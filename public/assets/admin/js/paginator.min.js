!function(a,t){a.Paginator=function(a){this.$wrapper=a,this.paginationData=this.$wrapper.find("#js-pagination").data(),this.params=null,this.pagination=this.$wrapper.find("#js-pagination").bootpag({total:this.paginationData.totalPage,page:this.paginationData.page,maxVisible:this.paginationData.maxVisible,leaps:this.paginationData.leaps}),this.pagination.on("page",this.onPaging.bind(this)),this.$wrapper.on("click","#js-clear-paginator",this.onClearFilter.bind(this)),this.$wrapper.on("click","table th a",this.onOrdering.bind(this)),this.$wrapper.on("click","#js-delete-multiple-records",this.onDeleteMultiple.bind(this)),this.$wrapper.on("click","#js-select-all",this.onToggleCheckbox.bind(this)),this.$wrapper.on("submit","form",this.onFilterResult.bind(this)),this.$wrapper.on("click",'[data-toggle="card-collapse"]',this.onCardCollapse.bind(this)),this.$wrapper.find(".js-datepicker").daterangepicker({autoUpdateInput:!1,locale:{cancelLabel:"Clear"}}),this.$wrapper.find(".js-select-list").length>0&&this.$wrapper.find(".js-select-list").each(function(){$(this).selectize()}),this.$wrapper.find(".js-datepicker").on("apply.daterangepicker",function(a,t){$(this).val(t.startDate.format("MM/DD/YYYY")+" - "+t.endDate.format("MM/DD/YYYY"))}),this.$wrapper.find('[data-toggle="tooltip"]').tooltip(),this.$wrapper.find('[data-toggle="popover"]').popover({html:!0})},$.extend(a.Paginator.prototype,{onCardCollapse:function(a){return $(a.currentTarget).closest("div.card").toggleClass("card-collapsed"),a.preventDefault(),!1},onDeleteMultiple:function(a){a.preventDefault();var e=t.map(this.$wrapper.find(".js-select-ids"),function(a){if($(a).is(":checked"))return $(a).val()}),r=this;e.length>0&&alertify.confirm($(a.currentTarget).data("title"),$(a.currentTarget).data("msg"),function(){$.ajax({url:$(a.currentTarget).data("href"),method:"DELETE",data:{data:e,token:$(a.currentTarget).data("token")},beforeSend:function(){r.$wrapper.find("#js-card-table .card-body").css("opacity","0.2"),r.$wrapper.find("#js-card-table .card-body").append('<div class="loader"></div>')},success:function(a){a.success?(alertify.success(a.msg),r.$wrapper.find("#js-clear-paginator").trigger("click"),r.$wrapper.find("#js-select-all").prop("checked",!1)):alertify.error(a.msg)},error:function(a,t,e){r.$wrapper.find("#js-card-table tbody").css("opacity","1"),r.$wrapper.find("#js-card-table tbody .loader").remove(),alertify.error("something went wrong sorry about that. please try again later.",5)}})},function(){console.log("Cancel")})},onClearFilter:function(a){a.preventDefault(),this.onLoadData({page:1},this)},onOrdering:function(a){a.preventDefault(),this.$wrapper.find("#js-card-table thead th a").removeClass().addClass("sortable"),void 0!==$(a.currentTarget).attr("direction")&&"asc"==$(a.currentTarget).attr("direction")?($(a.currentTarget).removeClass().addClass("desc"),$(a.currentTarget).attr("direction","desc")):($(a.currentTarget).removeClass().addClass("asc"),$(a.currentTarget).attr("direction","asc")),this.onLoadData($.extend(this.params,{sort:$(a.currentTarget).attr("field"),direction:$(a.currentTarget).attr("direction")}),this)},onPaging:function(a,t){this.onLoadData($.extend(this.params,{page:t}),this)},onFilterResult:function(a){a.preventDefault();var t=$(a.currentTarget).closest("form").serializeArray();t.forEach(function(a,e){var r,i,n=a.name;$('input[name="'+n+'"]').hasClass("js-datepicker")&&""!=a.value&&(null!=$('input[name="'+n+'"]').data("datepicker")?t[e].value=$('input[name="'+n+'"]').val():(r=$('input[name="'+n+'"]').data("daterangepicker").startDate.format("MM/DD/YYYY HH:mm:ss"),i=$('input[name="'+n+'"]').data("daterangepicker").endDate.format("MM/DD/YYYY HH:mm:ss"),t[e].value=r+" - "+i))}),this.onLoadData(t,this)},onToggleCheckbox:function(a){$(a.currentTarget).is(":checked")?this.$wrapper.find(".js-select-ids").each(function(){this.disabled||(this.checked=!0)}):this.$wrapper.find(".js-select-ids").each(function(){this.disabled||(this.checked=!1)})},onLoadData:function(a,t){$.ajax({url:t.paginationData.route,method:"GET",data:a,cache:!0,async:!0,beforeSend:function(){t.$wrapper.find("#js-card-table tbody").css("opacity","0.2"),t.$wrapper.find("#js-card-table tbody").append('<div class="loader"></div>')},success:function(a){t.$wrapper.find("#js-card-table tbody").css("opacity","1"),t.$wrapper.find("#js-card-table tbody").empty(),t.$wrapper.find("#js-card-table tbody").append(a.html),t.params=a.params,t.pagination.bootpag({total:parseInt(a.total_page)<=0?1:parseInt(a.total_page),page:parseInt(a.page)<=0?1:parseInt(a.page)}),t.$wrapper.find('[data-toggle="tooltip"]').tooltip(),t.$wrapper.find('[data-toggle="popover"]').popover({html:!0})},error:function(a,e,r){t.$wrapper.find("#js-card-table tbody").css("opacity","1"),t.$wrapper.find("#js-card-table tbody .loader").remove(),alertify.error("something went wrong sorry about that. please try again later.",5)}})}})}(window,jQuery);